<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Homework_10_1_2</title>
    
</head>
<body>
    
    <script type="text/javascript">
        

        window.addEventListener('load', ifUserIsLoggedIn);

        var login = window.localStorage.getItem('login');


        function ifUserIsLoggedIn () {
            if(login == 'Admin' || login == 'admin'){
                showLoginPage();
            }else{
                askLogin();
            };
        }
        

        function askLogin () {
            var answer = prompt('Введите имя пользователя');
            if(answer == 'admin' || answer == 'Admin'){
                setLocalStorage(answer);
                location.reload();
            }else{
                location.reload();
            }
        }

        function setLocalStorage (key) {
            window.localStorage.setItem('login', key);
        }

        function showLoginPage () {
            var body = document.querySelector('body'),
                button = '<input type=\'button\' value=\'Выйти\'>',
                span = '<span>Вы вошли под именем ' + login + '</span>';

            body.insertAdjacentHTML('beforeBegin', button);
            body.insertAdjacentHTML('beforeBegin', span);
            
            var buttonHtml = document.querySelector('input');

            buttonHtml.addEventListener('click', clearKeyLogin);

            function clearKeyLogin () {
                window.localStorage.removeItem('login');
                location.reload();
            }
        }

    </script>
    
</body>
</html>